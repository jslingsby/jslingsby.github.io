<!DOCTYPE html>
<html lang="en-us">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

 <title>Testing a citizen science App with the SAEON Graduate Student Network</title>



<meta name="description" content="Describe your website">


<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" id="ct-tracks-google-fonts-css" href="//fonts.googleapis.com/css?family=Raleway%3A400%2C700&amp;subset=latin%2Clatin-ext&amp;ver=4.7.2" type="text/css" media="all">
<link rel="stylesheet" href="/css/font-awesome.min.css">

<link href="/css/style.default.css" rel="stylesheet" id="theme-stylesheet">

<link href="/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="/img/favicon.png">


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-97038958-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>
  <body>
    <div id="root">
      <div class="container-fluid">
        <div class="row site-header">
          <div class="col-md-12">
            <div class="row">
              <div class="col-md-12 top-navigation">
                <div class="row">
  <div class="col-sm-6">
    <div class="categories-block">
      <a href="" class="track-categories">//</a>
      
      <a href="/categories/all">all</a>
      
      <a href="/categories/r-tutorials">r-tutorials</a>
      
      <a href="/categories/research">research</a>
      
    </div>
  </div>

  <div class="col-sm-6">
    <div class="social-media-block">

      
      
      
      <a href="https://twitter.com/JasperSlingsby" data-animate-hover="pulse" class="external twitter">
        <i class="fa fa-twitter"></i>
      </a>
      
      
      
      <a href="mailto:jslingsby@gmail.com" data-animate-hover="pulse" class="email">
        <i class="fa fa-envelope"></i>
      </a>
      
      
      
      

    </div>
  </div>
</div>

              </div>
            </div>
            <div class="row">
              <div class="col-md-10 header col-md-offset-1">
                <div class="row">
  <div class="col-md-6">
    <div class="title-info">
      
      <a href=""> Jasper Slingsby </a>
      
    </div>
  </div>
  <div class="col-md-6">
    <div class="menu">
      <a href="/">Home /</a>
      
      
      <a href="/about">about / </a>
      
      
      
      <a href="/contact">contact / </a>
      
      
      
      
      
      <a href="/publications">publications / </a>
      
      
      
      <a href="/students">students / </a>
      
      
    </div>
  </div>

</div>


              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-10 main-content col-md-offset-1">
            

<div class="col-md-12 entry">
  <div class="row">
    <div class="col-md-12">
      <div class="entry-meta">
        14 September 2017
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="entry-header">
       Testing a citizen science App with the SAEON Graduate Student Network
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-2">
      <div class="entry-sidebar">
        CATEGORIES
        <div class="entry-categories">
          <a href="">All</a>
        </div>

        Tags
        <div class="entry-tags">
          <a href="">All</a>
        </div>
      </div>
    </div>
    <div class="col-md-10">
      <div class="entry-content">
        <script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<link href="/rmarkdown-libs/leaflet-label/leaflet.label.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-label/leaflet.label.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>
<script src="/rmarkdown-libs/leaflet-providers/leaflet-providers.js"></script>
<script src="/rmarkdown-libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>


<p>This is based on data collected when I took students from <a href="http://gsn.dirisa.org/"><em>SAEON’s Graduate Student Network</em></a> into the field to introduce them to Fynbos and to show them a bit of the science I’m working on. To make things more interesting, I got them to help me test a smartphone app I’ve been developing (“VeldWatch”) that can be used to map any impacts on natural ecosystems observed in the field, like invasive species, plant mortality, etc.</p>
<p>The aim behind developing VeldWatch is to provide a platform whereby citizen scientists can contribute these observations, but also help groundtruth a model I’ve been working on (with others!) that identifies anomalous changes in vegetation greeness using satellite data.</p>
<p>If that’s not setting the bar high enough, I thought I’d use this blog post to both show them the results of our field trip and provide a little tutorial on mapping in R. Here goes…</p>
<p><br></p>
<p>We’ll start by calling the R libraries we need.</p>
<pre class="r"><code>#If you don&#39;t have the necessary packages installed use the function install.packages() as below
#install.packages(&quot;googlesheets&quot;) #Don&#39;t forget the the &quot;&quot;!
library(googlesheets)
suppressMessages(library(dplyr))
suppressMessages(library(tidyr))
suppressMessages(library(raster))</code></pre>
<pre><code>## Warning: package &#39;sp&#39; was built under R version 3.4.1</code></pre>
<pre class="r"><code>suppressMessages(library(rgdal))</code></pre>
<pre><code>## Warning: package &#39;rgdal&#39; was built under R version 3.4.1</code></pre>
<pre class="r"><code>suppressMessages(library(RColorBrewer))
suppressMessages(library(leaflet))
suppressPackageStartupMessages(library(ggmap))</code></pre>
<p><br></p>
<p>The VeldWatch App uploads the observation data directly into a Google Sheet in my GDrive (and the labeled photos into a folder), so it’s easiest if we can call the data directly from the online sheet rather than manually sharing and downloading the sheet every time. To do this, I use library(googlesheets) developed by Jenny Bryan and Joanna Zhao. Check out their <a href="https://rawgit.com/jennybc/googlesheets/master/vignettes/basic-usage.html"><strong>tutorial</strong></a> for more of the basics.</p>
<p>I’ve shared the sheet publically so you should just be able to access it, but you may get asked to authenticate R accessing your Google Sheets the first time you use this code. If googlesheets doesn’t work for you, you can access the spreadsheet <a href="https://docs.google.com/spreadsheets/d/1dDOo-nizXC1XDECPkXts2VloDaObTuNwxPBhYJFNLdo/edit?usp=sharing"><strong>here</strong></a>, download as .xlsx or .csv and read into R as you normally would.</p>
<p>Here we extract the google sheet key from the shared URL link, “register the key” (needed for accessing the spreadsheet), download the data and take a quick look at it.</p>
<p><br></p>
<pre class="r"><code>key &lt;- extract_key_from_url(&quot;https://docs.google.com/spreadsheets/d/1dDOo-nizXC1XDECPkXts2VloDaObTuNwxPBhYJFNLdo/edit?usp=sharing&quot;) #extract the google sheet key from a shared URL

dat &lt;- key %&gt;% gs_key(verbose = FALSE) %&gt;% gs_read(ws=1, verbose = FALSE) #register the key and download the data in the first worksheet

dat</code></pre>
<pre><code>## # A tibble: 36 x 21
##    TimeStamp `Radius assessed` `Land cover`
##       &lt;time&gt;             &lt;chr&gt;        &lt;chr&gt;
##  1  10:05:22               15m      Natural
##  2  10:39:13               15m      Natural
##  3  10:41:53               15m      Natural
##  4  10:44:12               15m      Natural
##  5  09:03:30              100m Near natural
##  6  10:41:05               15m      Natural
##  7  08:33:09              100m Near natural
##  8  08:34:33              100m Near natural
##  9  08:42:10                5m Near natural
## 10  08:49:09              100m Near natural
## # ... with 26 more rows, and 18 more variables: Impact &lt;chr&gt;, `Alien grass
## #   density` &lt;chr&gt;, `No of alien plants in search radius` &lt;chr&gt;, `Clearing
## #   intensity` &lt;lgl&gt;, `No of dead plants in search radius` &lt;chr&gt;, `Size of
## #   land/rock slide` &lt;lgl&gt;, `Vegetation removal` &lt;chr&gt;, `Suggested species
## #   or common name` &lt;chr&gt;, Comment &lt;chr&gt;, `Phone location` &lt;chr&gt;, `Photo
## #   A` &lt;chr&gt;, `Photo B` &lt;chr&gt;, `Photo C` &lt;chr&gt;, `Photo D` &lt;chr&gt;,
## #   Geolocation &lt;chr&gt;, Date &lt;chr&gt;, Time &lt;time&gt;, Test &lt;lgl&gt;</code></pre>
<p><br></p>
<p>Now we want to extract the latitude and longitude stored in the “Geolocation” column into separate columns. This requires splitting the value in each row of “Geolocation” by the fixed divider “,” and assigning the first value from each split to latitude and the second to longitude. We’ll use the function <a href="http://tidyr.tidyverse.org/reference/separate.html"><em>separate()</em> from <strong>library(tidyr)</strong></a> to do this.</p>
<p><br></p>
<pre class="r"><code>dat &lt;- dat %&gt;% separate(Geolocation, sep = &quot;, &quot;, c(&quot;Lat&quot;, &quot;Lon&quot;), remove = FALSE, convert = TRUE)</code></pre>
<p><br></p>
<p>This has added new columns “Lat” and “Lon”. Setting “remove = FALSE” keeps the column “Geolocation”, while “convert = TRUE” coerces the new columns to class “numeric” from “character” if possible.</p>
<p>We can then make the data frame a <em>spatial</em> object of class “SpatialPointsDataFrame” using the function coordinates(). This is essentially like converting the table to a shapefile with point locations and an attribute table.</p>
<p><br></p>
<pre class="r"><code>class(dat)</code></pre>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<pre class="r"><code>sdat &lt;- dat #Make a new data frame &quot;sdat&quot; that we&#39;ll convert to a spatial object

coordinates(sdat) &lt;- ~Lon+Lat

class(sdat)</code></pre>
<pre><code>## [1] &quot;SpatialPointsDataFrame&quot;
## attr(,&quot;package&quot;)
## [1] &quot;sp&quot;</code></pre>
<p><br></p>
<p>Note that if we are working with spatial data we need to assign a coordinate reference system (CRS). In this case the coordinates are geographic (unprojected) with the geodetic datum WGS84. We can tell R this by assigning a “proj4string”. I’m not going to go into the details of CRSs, but they differ in terms of whether they represent locations, distances or areas correctly, and can differ depending on where you are on the planet. You need to choose the correct CRS for the analysis you are doing. You can read more about them <a href="http://desktop.arcgis.com/en/arcmap/10.3/guide-books/map-projections/what-are-map-projections.htm"><strong>here</strong></a>. In all cases, you want to make sure that all your spatial objects have the same CRS!!!</p>
<p><br></p>
<pre class="r"><code>proj4string(sdat) &lt;- &quot;+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0&quot;</code></pre>
<p><br></p>
<p>Note that this merely assigns a CRS, it does not transform the data from one CRS to another. If you don’t know the original CRS your data are in they are useless for spatial analyses until you find out…</p>
<p>Ok, let’s see where our points land…</p>
<p><br></p>
<pre class="r"><code>b &lt;- bbox(extent(sdat)+.25)

smap &lt;- ggmap(get_map(location = b, source = &quot;stamen&quot;, maptype = &quot;watercolor&quot;, 
    crop = T, zoom = 11))

smap + geom_point(data = dat, aes(x = Lon, y = Lat, col = &quot;red2&quot;), alpha = 1)</code></pre>
<p><img src="/post/2017-09-13-gsn_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><br></p>
<p>Looks like we have points all over the place, but this is not unexpected - ideally people will be using the app to collect data from across the country!</p>
<p>We can trim the records to our area of interest by setting our desired extent and cropping the data.</p>
<p><br></p>
<pre class="r"><code>fdat &lt;- crop(sdat, y = extent(18.38, 18.51, -34.15, -34.06)) #crop points to extent

fb &lt;- bbox(extent(fdat)+.125)
fmap &lt;- ggmap(get_map(location = fb, source = &quot;stamen&quot;, maptype = &quot;watercolor&quot;, 
    crop = T, zoom = 11))
fmap + geom_point(data = dat, aes(x = Lon, y = Lat, col = &quot;red2&quot;), alpha = 1)</code></pre>
<p><img src="/post/2017-09-13-gsn_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><br></p>
<p>Much better!</p>
<p>BUT! Some of the points we logged with the app are FAR from where we were hiking?</p>
<p>Let’s add a GPS track I took to see where we actually were. You can download the track <a href="https://www.dropbox.com/s/w2xplo4zkbi1kot/Track_14-SEP-17%20164823.gpx?dl=0"><strong>here</strong></a>.</p>
<p><br></p>
<pre class="r"><code>track &lt;- readOGR(dsn=&quot;/Users/jasper/Dropbox/SAEON/GSN/2017/Track_14-SEP-17 164823.gpx&quot;, layer=&quot;tracks&quot;)</code></pre>
<pre><code>## OGR data source with driver: GPX 
## Source: &quot;/Users/jasper/Dropbox/SAEON/GSN/2017/Track_14-SEP-17 164823.gpx&quot;, layer: &quot;tracks&quot;
## with 1 features
## It has 13 fields</code></pre>
<p><br></p>
<p>Now let’s add the track to our plot, but to do this with the plotting functions we’ve been using we need to use the function <em>fortify()</em> to arrange the track properly.</p>
<p><br></p>
<pre class="r"><code>track_f &lt;- fortify(track)

head(track_f)</code></pre>
<pre><code>##       long       lat order piece id group
## 1 18.42222 -34.09084     1     1  0   0.1
## 2 18.42232 -34.09088     2     1  0   0.1
## 3 18.42241 -34.09093     3     1  0   0.1
## 4 18.42250 -34.09099     4     1  0   0.1
## 5 18.42259 -34.09106     5     1  0   0.1
## 6 18.42267 -34.09111     6     1  0   0.1</code></pre>
<p><br></p>
<p>Now we can just add it to our existing plot with <em>geom_path()</em>.</p>
<p><br></p>
<pre class="r"><code>fmap + geom_point(data = dat, aes(x = Lon, y = Lat, col = &quot;red2&quot;), alpha = 1) + 
  geom_path(data = track_f, aes(x=long, y=lat, group=group, col = &quot;royalblue&quot;))</code></pre>
<p><img src="/post/2017-09-13-gsn_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><br></p>
<p>Oh dear…</p>
<p>Another “oh dear” is that it’s my 6-month old’s bath time, so I’ll have to stop here and come back to this. My plan is to identify the “errant” points by calculating the distance to the GPS track, and then see if it’s the same phone.</p>
<p><br></p>
<p>But first, let’s look at some of the data interactively!</p>
<p><br></p>
<pre class="r"><code>fdat@data &lt;- fdat@data %&gt;% separate(Geolocation, sep = &quot;, &quot;, c(&quot;Lat&quot;, &quot;Lon&quot;), remove = FALSE, convert = TRUE)
leaflet(fdat) %&gt;% addProviderTiles(providers$Esri.WorldImagery) %&gt;% addMarkers(~Lon, ~Lat)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,null,{"errorTileUrl":"","noWrap":false,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false}]},{"method":"addMarkers","args":[[-34.107525,-34.104865,-34.091183,-34.091335,-34.092598,-34.093139,-34.093235,-34.09334,-34.13148,-34.122318,-34.098236,-34.099404,-34.099134,-34.100586,-34.101758,-34.105327,-34.103921,-34.091323,-34.093187,-34.093479,-34.093469,-34.100652,-34.091167,-34.101747,-34.093149,-34.101943,-34.105596,-34.10403,-34.10067,-34.100351,-34.097461],[18.464325,18.453626,18.422787,18.422804,18.423293,18.423523,18.42336,18.423487,18.388847,18.382913,18.416309,18.430032,18.42829,18.430966,18.385509,18.435118,18.444904,18.422835,18.423419,18.434371,18.434318,18.447805,18.422852,18.385832,18.423384,18.433125,18.435332,18.444854,18.447974,18.447814,18.441546],null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,null,null]}],"limits":{"lat":[-34.13148,-34.091167],"lng":[18.382913,18.464325]}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>I need to add a bunch more context etc here, but for my and the students’ sake we’d like to visualize the model outputs. First lets look at the sites that are less green than the model expects.</p>
<p><br></p>
<pre class="r"><code>excbelow &lt;- raster(&quot;/Users/jasper/Dropbox/Shared/Data4ClimateAction/PeninsulaData/exceedbelow&quot;)

pal &lt;- colorNumeric(brewer.pal(9, &quot;Reds&quot;), values(excbelow), na.color = &quot;transparent&quot;)

leaflet()  %&gt;% addProviderTiles(providers$Esri.WorldImagery) %&gt;%
  addRasterImage(excbelow, colors = pal, opacity = 0.5) %&gt;%
  addLegend(pal = pal, values = values(excbelow),
    title = &quot;Exceedance Below&quot;)</code></pre>
<div id="htmlwidget-2" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,null,{"errorTileUrl":"","noWrap":false,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false}]},{"method":"addRasterImage","args":["data:image/png;base64,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",[[-33.9091715035979,18.3036518181693],[-34.358714011233,18.4931147722588]],0.5,null,null,null]},{"method":"addLegend","args":[{"colors":["#FFF5F0 , #FFF5F0 0%, #FECCB7 19.2307692307692%, #FC8F6F 38.4615384615385%, #F44F37 57.6923076923077%, #C5171C 76.9230769230769%, #790310 96.1538461538462%, #67000D "],"labels":["0","5","10","15","20","25"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"numeric","title":"Exceedance Below","extra":{"p_1":0,"p_n":0.961538461538462},"layerId":null,"className":"info legend"}]}],"limits":{"lat":[-34.358714011233,-33.9091715035979],"lng":[18.3036518181693,18.4931147722588]}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>Now the sites that are more green than expected…</p>
<p><br></p>
<pre class="r"><code>excabove &lt;- raster(&quot;/Users/jasper/Dropbox/Shared/Data4ClimateAction/PeninsulaData/exceedabove&quot;)

pal &lt;- colorNumeric(brewer.pal(9, &quot;Blues&quot;), values(excabove), na.color = &quot;transparent&quot;)

leaflet()  %&gt;% addProviderTiles(providers$Esri.WorldImagery) %&gt;%
  addRasterImage(excabove, colors = pal, opacity = 0.5) %&gt;%
  addLegend(pal = pal, values = values(excabove),
    title = &quot;Exceedance Above&quot;)</code></pre>
<div id="htmlwidget-3" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,null,{"errorTileUrl":"","noWrap":false,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false}]},{"method":"addRasterImage","args":["data:image/png;base64,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",[[-33.9091715035979,18.3036518181693],[-34.358714011233,18.4931147722588]],0.5,null,null,null]},{"method":"addLegend","args":[{"colors":["#F7FBFF , #F7FBFF 0%, #D1E2F3 19.2307692307692%, #9AC8E0 38.4615384615385%, #539DCC 57.6923076923077%, #1E6CB1 76.9230769230769%, #093A7A 96.1538461538462%, #08306B "],"labels":["0","5","10","15","20","25"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"numeric","title":"Exceedance Above","extra":{"p_1":0,"p_n":0.961538461538462},"layerId":null,"className":"info legend"}]}],"limits":{"lat":[-34.358714011233,-33.9091715035979],"lng":[18.3036518181693,18.4931147722588]}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>You’ll note that some sites are both above and below! These sites are just inherantly noisy. I still need to figure out why! One more item on the never-ending ToDo list!</p>
<p><br></p>

      </div>
    </div>
  </div>

  <hr/>
  <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-jslingsby-github-io';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  

</div>

          </div>
        </div>
        <div class="row site-footer">
          <div class="col-md-12">
            <div class="row">
  <div class="col-md-12 footer-title">
    <h2>
      
      <a href=""> Jasper Slingsby </a>
      
    </h2>
  </div>
</div>
<div class="row">
  <div class="col-md-12 footer-menu">
      <a href="/">Home /</a>
      
      
      <a href="/about">about / </a>
      
      
      
      <a href="/contact">contact / </a>
      
      
      
      
      
      <a href="/publications">publications / </a>
      
      
      
      <a href="/students">students / </a>
      
      

  </div>
</div>
<div class="row">
  <div class="col-sm-12">
    <div class="social-media-block-footer">
      
      
      
      <a href="https://twitter.com/JasperSlingsby" data-animate-hover="pulse" class="external twitter">
        <i class="fa fa-twitter"></i>
      </a>
      
      
      
      <a href="mailto:jslingsby@gmail.com" data-animate-hover="pulse" class="email">
        <i class="fa fa-envelope"></i>
      </a>
      
      
      
      

    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </div>
    <script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.cookie.js"> </script>
<script src="/js/ekko-lightbox.js"></script>
<script src="/js/jquery.scrollTo.min.js"></script>
<script src="/js/masonry.pkgd.min.js"></script>
<script src="/js/imagesloaded.pkgd.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/front.js"></script>

  </body>
</html>
